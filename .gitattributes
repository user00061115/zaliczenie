screenWidth = 600
screenHeight = 400

cols = 8
rows = 4
brickWidth = 60
brickHeight = 20


#платформа
class Paddle:
    def __init__(self, width, height, y):
        self.width = width
        self.height = height
        self.y = y
        self.x = 0  # начнет обновляться в draw()

    def update(self):
        self.x = constrain(mouseX - self.width / 2, 0, width - self.width)

    def draw(self):
        fill(200)
        rect(self.x, self.y, self.width, self.height)


#мяч
class Ball:
    def __init__(self, x, y, size, speedX, speedY):
        self.x = x
        self.y = y
        self.size = size
        self.speedX = speedX
        self.speedY = speedY

    def update(self):
        self.x += self.speedX
        self.y += self.speedY

        if self.x <= 0 or self.x >= width:
            self.speedX *= -1
        if self.y <= 0:
            self.speedY *= -1

    def draw(self):
        fill(255, 100, 100)
        ellipse(self.x, self.y, self.size, self.size)

    def check_paddle(self, paddle):
        if (self.y + self.size / 2 >= paddle.y and
            paddle.x < self.x < paddle.x + paddle.width):
            self.speedY *= -1
            self.y = paddle.y - self.size / 2

    def check_bottom(self):
        return self.y > height


#кирпич
class Brick:
    def __init__(self, x, y):
        self.x = x
        self.y = y
        self.alive = True

    def draw(self):
        if self.alive:
            fill(100, 200, 255)
            rect(self.x, self.y, brickWidth, brickHeight)

    def check_collision(self, ball):
        if not self.alive:
            return
        if (ball.x + ball.size / 2 > self.x and ball.x - ball.size / 2 < self.x + brickWidth and
            ball.y + ball.size / 2 > self.y and ball.y - ball.size / 2 < self.y + brickHeight):
            ball.speedY *= -1
            self.alive = False


#обьявляю переменные и обьекты 
paddle = None
ball = None
bricks = []

def setup():
    global paddle, ball, bricks
    size(screenWidth, screenHeight)

    # создаём объекты
    paddle = Paddle(80, 15, height - 30)
    ball = Ball(width / 2, height / 2, 15, 4, -4)

    #создаю кирпичи
    bricks = []
    for i in range(cols):
        for j in range(rows):
            brickX = i * (brickWidth + 10) + 35
            brickY = j * (brickHeight + 10) + 40
            bricks.append(Brick(brickX, brickY))


def draw():
    global paddle, ball, bricks

    background(30)

    #платформа
    paddle.update()
    paddle.draw()


    #мяч
    ball.update()
    ball.check_paddle(paddle)
    ball.draw()


    #кирпичи
    for brick in bricks:
        brick.check_collision(ball)
        brick.draw()


    #проверка проигрыша
    if ball.check_bottom():
        textSize(32)
        fill(255)
        text("Game Over", width / 2 - 80, height / 2)
        noLoop()
